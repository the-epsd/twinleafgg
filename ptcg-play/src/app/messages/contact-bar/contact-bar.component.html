<div class="ptcg-contact-bar" [class.active]="active" [class.marked]="marked" [routerLink]="['/message', user.userId]"
  *ngIf="user$ | async as user">

  <div class="ptcg-contact-avatar-box">
    <ptcg-avatar class="ptcg-contact-avatar" [avatarFile]="user.avatarFile">
    </ptcg-avatar>
    <div class="ptcg-contact-unread-badge" *ngIf="marked"></div>
  </div>

  <div class="ptcg-contact-info">
    <div class="ptcg-contact-header">
      <div class="ptcg-contact-name" [style.color]="user.ranking ? user.ranking.color : null">
        {{ user.name }}
      </div>
      <div class="ptcg-contact-timestamp" *ngIf="conversation.lastMessage?.created">
        {{ formatTimestamp(conversation.lastMessage.created) }}
      </div>
    </div>
    <div class="ptcg-contact-message">
      <span class="ptcg-contact-message-text">{{ conversation.lastMessage?.text || ' ' }}</span>
    </div>
  </div>

</div>