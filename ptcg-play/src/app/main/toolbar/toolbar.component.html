<div class="gaming-toolbar">
  <!-- Left Section - Logo -->
  <div class="toolbar-left">
    <div class="logo-section">
      <img src="/assets/tl-open-beta.webp" alt="Twinleaf" class="twinleaf-logo">
    </div>
  </div>

  <!-- Center Section - Main Navigation -->
  <div class="toolbar-center">
    <nav class="main-navigation">
      <a routerLink="/games" class="nav-item" routerLinkActive="active" *ngIf="loggedUser">
        <span class="nav-text">{{ 'MAIN_GAMES' | translate }}</span>
      </a>
      <a routerLink="/deck" class="nav-item" routerLinkActive="active" *ngIf="loggedUser">
        <span class="nav-text">{{ 'MAIN_DECKS' | translate }}</span>
      </a>
      <a routerLink="/friends" class="nav-item" routerLinkActive="active" *ngIf="loggedUser">
        <span class="nav-text">FRIENDS</span>
      </a>
      <a routerLink="/ranking" class="nav-item" routerLinkActive="active" *ngIf="loggedUser">
        <span class="nav-text">{{ 'MAIN_RANKING' | translate }}</span>
      </a>
      <a routerLink="/message" class="nav-item" routerLinkActive="active" *ngIf="loggedUser">
        <span class="nav-text">{{ 'MAIN_MESSAGES' | translate }}</span>
      </a>
      <a routerLink="/battle-pass" class="nav-item battle-pass-item" routerLinkActive="active" *ngIf="loggedUser">
        <span class="nav-text">BATTLE PASS</span>
      </a>
    </nav>
  </div>

  <span class="epsd-spacer"></span>

  <!-- Connection status indicator -->
  <ptcg-connection-status *ngIf="loggedUser"></ptcg-connection-status>

  <button mat-button [matMenuTriggerFor]="gamesMenu" *ngIf="loggedUser && (gameStates$ | async)?.length > 0">
    {{ 'MAIN_TABLES' | translate }}
    <mat-icon>arrow_drop_down</mat-icon>
    <span *ngIf="hasTableNotifications$ | async" class="notification-badge" [matBadge]="tableBadgeContent$ | async"
      [matBadgeColor]="tableBadgeColor$ | async" matBadgeOverlap="false"></span>
  </button>
  <mat-menu #gamesMenu="matMenu">
    <a mat-menu-item *ngFor="let gameState of (gameStates$ | async)" [routerLink]="['/table', gameState.localId]">
      <ptcg-sidenav-item [gameState]="gameState"></ptcg-sidenav-item>
    </a>
  </mat-menu>

  <!-- Right Section - User Resources and Profile -->
  <div class="toolbar-right">
    <!-- Language select - shown when not logged in -->
    <ptcg-language-select *ngIf="!loggedUser"></ptcg-language-select>

    <div class="ptcg-toolbar-user-info">
      <ptcg-user-bar *ngIf="loggedUser" class="ptcg-logged-user" [openUserPopup]="false" [user]="loggedUser"
        [matMenuTriggerFor]="menu">
      </ptcg-user-bar>

      <mat-menu #menu="matMenu" class="user-menu">
        <button mat-menu-item [routerLink]="['/profile', loggedUser?.userId]">
          {{ 'BUTTON_SHOW_PROFILE' | translate }}
        </button>
        <button mat-menu-item (click)="openSettingsDialog()">
          {{ 'BUTTON_SETTINGS' | translate }}
        </button>
        <button mat-menu-item (click)="logout()">
          {{ 'BUTTON_LOGOUT' | translate }}
        </button>
      </mat-menu>
    </div>
  </div>
</div>