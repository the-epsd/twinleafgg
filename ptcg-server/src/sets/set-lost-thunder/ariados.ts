// This file was auto-generated by the card stub generator.
// Card effects were implemented by an agent.
// If you have any questions or feedback, reach out to @C4 in the discord.

import { PokemonCard } from '../../game/store/card/pokemon-card';
import { Stage, CardType } from '../../game/store/card/card-types';
import { StoreLike, State } from '../../game';
import { Effect } from '../../game/store/effects/effect';
import { WAS_ATTACK_USED } from '../../game/store/prefabs/prefabs';
import { YOUR_OPPPONENTS_ACTIVE_POKEMON_IS_NOW_POISIONED } from '../../game/store/prefabs/attack-effects';

export class Ariados extends PokemonCard {
  public stage: Stage = Stage.STAGE_1;
  public evolvesFrom: string = 'Spinarak';
  public cardType: CardType = G;
  public hp: number = 110;
  public weakness = [{ type: R }];
  public retreat = [C];

  public attacks = [
    {
      name: 'Trapping Thread',
      cost: [C, C],
      damage: 30,
      text: 'Whenever your opponent plays an Item or Supporter card from their hand during their next turn, prevent all effects of that card done to the Defending Pok\u00e9mon.'
    },
    {
      name: 'Poison Jab',
      cost: [G, C, C],
      damage: 70,
      text: 'Your opponent\'s Active Pok\u00e9mon is now Poisoned.'
    }
  ];

  public set: string = 'LOT';
  public setNumber: string = '10';
  public cardImage: string = 'assets/cardback.png';
  public name: string = 'Ariados';
  public fullName: string = 'Ariados LOT';

  public reduceEffect(store: StoreLike, state: State, effect: Effect): State {
    // Attack 1: Trapping Thread
    // TODO: "Whenever your opponent plays an Item or Supporter card from their hand during their next turn, prevent all effects of that card done to the Defending Pokemon" is too complex to implement with current engine facilities. Leaving as damage-only.
    if (WAS_ATTACK_USED(effect, 0, this)) {
      // Damage is applied automatically
    }

    // Attack 2: Poison Jab
    // Ref: set-celestial-storm/treecko.ts (Sleep Poison)
    if (WAS_ATTACK_USED(effect, 1, this)) {
      YOUR_OPPPONENTS_ACTIVE_POKEMON_IS_NOW_POISIONED(store, state, effect);
    }

    return state;
  }
}
